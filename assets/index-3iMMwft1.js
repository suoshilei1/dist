const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DynamicDataAnalysis-DnxDhAdO.js","assets/index-DWtISIBF.js","assets/index-CKGHOdoA.css","assets/meter-BWYCtTLu.js","assets/dayjs.min-t3tQ4ZJg.js","assets/BaseChart-BeO_gFFx.js","assets/installCanvasRenderer-COQy7h5q.js","assets/DebounceAndThrottle-B_grFKK4.js","assets/BaseChart--RVKt3gE.css","assets/index-CZh1RU_w.js","assets/index-CVAPKPs0.js","assets/plugin-vue_export-helper-CqGSI99y.js","assets/index-CuP5NVML.js","assets/index-DibVzrKz.js","assets/icon-Cc3ZZocH.js","assets/aria-BUADUvnR.js","assets/DynamicDataAnalysis-BvvBLiYK.css","assets/base-CMRK1q-d.css","assets/el-badge-BWN_0xb6.css","assets/DynamicDataTable-C_L0cbjS.js","assets/pagination-BRd1ibtD.js","assets/select-DYqyOwb9.js","assets/popper-BNb2tGl7.js","assets/focus-trap-D8pg8SM_.js","assets/use-form-item-CuJrx89H.js","assets/popper-CLIXM2zs.css","assets/scrollbar-BMOxp_jN.js","assets/scrollbar-C4q0Zfda.css","assets/index-0A8HTOTd.js","assets/castArray-6TPyo715.js","assets/scroll-DMdoCUCr.js","assets/isEqual-DqXByToB.js","assets/_Uint8Array-DaZSNKBQ.js","assets/_baseIteratee-FAqII4j1.js","assets/index-DfeXTFmx.js","assets/select-BgyzP3al.css","assets/input-B0bTKLmJ.js","assets/input-CvX03x0l.css","assets/index-DjvbDGpK.js","assets/pagination-C6JdIW2O.css","assets/table-column-Dde1JUzt.js","assets/checkbox-BzIrpOFw.js","assets/checkbox-DD4l_ypT.css","assets/_initCloneObject-ChNElRpx.js","assets/table-column-CzPu3YYC.css","assets/button-DfREtLL_.js","assets/button-CzpQr9Wb.css","assets/DynamicDataTable-DlWhkZB5.css","assets/tag-B2cUah5Z.css","assets/tooltip-BV7R58v2.css"])))=>i.map(i=>d[i]);
import{_ as B,r as f,F as V,w as I,c as g,J as A,l,k as o,e as n,n as L,g as D,al as R,W as x,T,d as k,Y as N,N as P,h as H,K as F,a8 as E,aW as K,a_ as q,v as J,a9 as O}from"./index-DWtISIBF.js";import{E as U}from"./empty-CAh1XabF.js";/* empty css                */import{E as Y}from"./popper-BNb2tGl7.js";import{E as G}from"./link-CN9EbjGT.js";import{E as Q}from"./card-Cr9tAXzl.js";import{C as X}from"./CustomDatePicker-DTvPnXeh.js";import{q as W}from"./meter-BWYCtTLu.js";import{E as Z,a as $}from"./table-column-Dde1JUzt.js";import"./checkbox-BzIrpOFw.js";import"./scrollbar-BMOxp_jN.js";import{E as ee}from"./button-DfREtLL_.js";/* empty css            */import{u as z}from"./area-CDc72icr.js";import{d as C}from"./dayjs.min-t3tQ4ZJg.js";/* empty css             *//* empty css                 */import{E as j}from"./index-CZh1RU_w.js";import{E as te}from"./index-CuP5NVML.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./use-form-item-CuJrx89H.js";import"./index-CVAPKPs0.js";import"./aria-BUADUvnR.js";import"./focus-trap-D8pg8SM_.js";import"./icon-Cc3ZZocH.js";import"./date-picker-B_H4_mfX.js";import"./input-B0bTKLmJ.js";import"./index-DibVzrKz.js";import"./index-CeeR5a7H.js";import"./index-DfeXTFmx.js";import"./isEqual-DqXByToB.js";import"./_Uint8Array-DaZSNKBQ.js";import"./_baseIteratee-FAqII4j1.js";import"./_initCloneObject-ChNElRpx.js";import"./index-DjvbDGpK.js";const ae={__name:"StaticDataAnalysis",props:{meterList:{type:Array,default:()=>[]},selectedMeterId:{type:Number,default:null}},emits:["rowClick","toggleView"],setup(w,{expose:t,emit:c}){t();const e=w,d=c,m=f(null),s=V(()=>e.selectedMeterId);I(()=>e.selectedMeterId,i=>{!i&&m.value&&m.value.setCurrentRow(null)});const _=z();function u(i){d("rowClick",i)}function r(i){return i>0}const p={props:e,emit:d,tableRef:m,currentRowKey:s,areaStore:_,handleMeterClick:u,isLeaked:r,get useAreaStore(){return z},get dayjs(){return C},ref:f,computed:V,watch:I};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},re={class:"ellipsis-cell"};function oe(w,t,c,e,d,m){const s=Z,_=ee,u=$;return g(),A(u,{style:{height:"100%"},data:c.meterList,onRowClick:e.handleMeterClick,"highlight-current-row":"","current-row-key":e.currentRowKey,ref:"tableRef"},{default:l(()=>[o(s,{label:"表计编号"},{default:l(r=>[n("span",{style:L({color:e.isLeaked(r.row.value)?"red":""})},D(r.row.meter_code),5)]),_:1}),o(s,{prop:"area_id",label:"所供区域","show-overflow-tooltip":""},{default:l(r=>[n("div",re,[n("span",null,D(e.areaStore.getAreaNameById(r.row.area_id)),1)])]),_:1}),o(s,{prop:"value",label:"最小值"}),o(s,{prop:"time",label:"最小值时间"},{default:l(r=>[n("span",{style:L({color:e.isLeaked(r.row.value)?"red":""})},D(e.dayjs(r.row.time).format("MM-DD HH:mm")),5)]),_:1}),o(s,{width:"150px",label:"操作"},{default:l(r=>[o(_,{size:"small",type:"primary",onClick:t[0]||(t[0]=p=>e.emit("toggleView","chart"))},{icon:l(()=>t[2]||(t[2]=[n("i",{class:"fa fa-line-chart"},null,-1)])),_:1}),o(_,{size:"small",type:"success",onClick:t[1]||(t[1]=p=>e.emit("toggleView","table"))},{icon:l(()=>t[3]||(t[3]=[n("i",{class:"fa fa-table"},null,-1)])),_:1})]),_:1})]),_:1},8,["data","current-row-key"])}const ne=B(ae,[["render",oe],["__scopeId","data-v-9b1699b5"],["__file","D:/临时存放/green-carbon-1.0/src/views/WarningCenter/WaterLeakageAnalysis/components/StaticDataAnalysis.vue"]]),le={__name:"index",setup(w,{expose:t}){t();const c=f("chart"),e=a=>{typeof a=="string"?c.value=a:c.value=c.value==="chart"?"table":"chart",s.value=c.value==="chart"?d:m};let d=E(()=>O(()=>import("./DynamicDataAnalysis-DnxDhAdO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),m=E(()=>O(()=>import("./DynamicDataTable-C_L0cbjS.js"),__vite__mapDeps([19,1,2,20,12,11,14,21,22,10,15,23,24,25,26,27,28,29,13,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,4,3,9,47,48,49])));const s=R(d),_=[C().subtract(3,"day").startOf("day").valueOf(),C().subtract(1,"day").endOf("day").valueOf()],u=f(_),r=f(null),p=a=>{r.value=a.id};let i=f([]),y=f(!1);const M=async(a,h)=>{y.value=!0;try{let v=await W({id:b,start_time:a,end_time:h});if(v.code!==200){j.error(v.message||"静态分析统计失败"),console.error(v);return}i.value=v.data}catch{j.error("服务器异常，静态分析统计失败")}finally{y.value=!1}},b=x().currentCompany.id;T(()=>{var a,h;b&&M((a=u.value)==null?void 0:a[0],(h=u.value)==null?void 0:h[1])});const S={currentView:c,toggleView:e,get DynamicDataAnalysis(){return d},set DynamicDataAnalysis(a){d=a},get DynamicDataTable(){return m},set DynamicDataTable(a){m=a},currentComponent:s,defaultDateRange:_,dateRange:u,selectedMeterId:r,handleMeterClick:p,get meterList(){return i},set meterList(a){i=a},get loading(){return y},set loading(a){y=a},fetchMeterData:M,currentCompanyId:b,ref:f,watchEffect:T,shallowRef:R,get Close(){return K},get DataAnalysis(){return q},FilterHeader:X,get useCompanyStore(){return x},get getWaterStaticApi(){return W},StaticDataAnalysis:ne,get dayjs(){return C},get getAsyncComponent(){return E}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},se={class:"layout-wrapper"},ie={class:"left-content"},ce={class:"meter-list"},de={class:"filter-section"},me={class:"right-content"},_e={class:"card-header"},ue={key:0,class:"header-actions"},pe={class:"view-toggle"},fe={class:"chart-container"};function ye(w,t,c,e,d,m){const s=Q,_=G,u=Y,r=te,p=U,i=J;return g(),k("div",se,[n("div",ie,[N((g(),k("div",ce,[o(s,{shadow:"never",style:{height:"100%",overflow:"auto"},header:"静态数据分析"},{default:l(()=>[n("div",de,[o(e.FilterHeader,{"is-range":!0,"max-days":4,modelValue:e.dateRange,"onUpdate:modelValue":t[0]||(t[0]=y=>e.dateRange=y)},null,8,["modelValue"])]),o(e.StaticDataAnalysis,{selectedMeterId:e.selectedMeterId,onToggleView:e.toggleView,meterList:e.meterList,onRowClick:e.handleMeterClick},null,8,["selectedMeterId","meterList"])]),_:1})])),[[i,e.loading]])]),n("div",me,[o(s,{style:{height:"100%",display:"flex","flex-direction":"column"}},{header:l(()=>[n("div",_e,[t[1]||(t[1]=n("span",null,"动态数据分析",-1)),e.selectedMeterId?(g(),k("div",ue,[n("div",pe,[o(u,{content:e.currentView==="chart"?"切换为表格视图":"切换为图表视图",placement:"top"},{default:l(()=>[o(_,{underline:!1,onClick:e.toggleView},{default:l(()=>[n("i",{class:P(["fa",e.currentView==="chart"?"fa-table":"fa-line-chart"]),style:{"font-size":"1.2rem"}},null,2)]),_:1})]),_:1},8,["content"])])])):H("",!0)])]),default:l(()=>[n("div",fe,[e.selectedMeterId?(g(),A(F(e.currentComponent),{key:1,id:e.selectedMeterId,dateRange:e.dateRange},null,8,["id","dateRange"])):(g(),A(p,{key:0,description:"请在左侧选择表计以查看动态分析数据","image-size":200},{image:l(()=>[o(r,{style:{"font-size":"100px",color:"var(--el-text-color-secondary)"}},{default:l(()=>[o(e.DataAnalysis)]),_:1})]),_:1}))])]),_:1})])])}const Ze=B(le,[["render",ye],["__scopeId","data-v-5f1dd1d9"],["__file","D:/临时存放/green-carbon-1.0/src/views/WarningCenter/WaterLeakageAnalysis/index.vue"]]);export{Ze as default};
