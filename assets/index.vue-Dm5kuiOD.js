import{u as C,c as w,i as x,b as _,a as P}from"./useParentComponentEffect-CXfAGznX.js";import{D as R,aC as U,M as j,w as s}from"./index-oALI6hjD.js";let d=null;function E(){if(d!==null)return d;const a="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png";d={simple_red:new BMapGL.Icon(a,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),simple_blue:new BMapGL.Icon(a,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_red:new BMapGL.Icon(a,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_blue:new BMapGL.Icon(a,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),start:new BMapGL.Icon(a,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(400/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),end:new BMapGL.Icon(a,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(450/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),location:new BMapGL.Icon(a,new BMapGL.Size(28/2,40/2),{imageOffset:new BMapGL.Size(248/2,466/2),imageSize:new BMapGL.Size(600/2,600/2)})};for(let i=1;i<=10;i++)d["red"+i]=new BMapGL.Icon(a,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(i-1),0),imageSize:new BMapGL.Size(600/2,600/2)});for(let i=1;i<=10;i++)d["blue"+i]=new BMapGL.Icon(a,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(i-1),132/2),imageSize:new BMapGL.Size(600/2,600/2)});return d}var N=R(Object.assign({name:"BMarker"},{__name:"index",props:{position:{type:null,required:!0},offset:{type:Object,required:!1,default:()=>({x:0,y:0})},icon:{type:null,required:!1},zIndex:{type:Number,required:!1},enableMassClear:{type:Boolean,required:!1,default:!0},enableDragging:{type:Boolean,required:!1,default:!1},enableClicking:{type:Boolean,required:!1,default:!0},raiseOnDrag:{type:Boolean,required:!1,default:!1},draggingCursor:{type:String,required:!1,default:"pointer"},rotation:{type:Number,required:!1,default:0},title:{type:String,required:!1,default:""},visible:{type:Boolean,required:!1,default:!0},onClick:{type:null,required:!1},onDblclick:{type:null,required:!1},onMousedown:{type:null,required:!1},onMouseup:{type:null,required:!1},onMouseout:{type:null,required:!1},onMouseover:{type:null,required:!1},onRemove:{type:null,required:!1},onInfowindowclose:{type:null,required:!1},onInfowindowopen:{type:null,required:!1},onDragstart:{type:null,required:!1},onDragging:{type:null,required:!1},onDragend:{type:null,required:!1},onRightclick:{type:null,required:!1}},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],setup(a,{emit:i}){const t=a;let n;const{ready:S}=C(e=>{const l=()=>{n&&e.removeOverlay(n)},u=()=>{if(!t.position)return!1;const{position:r,offset:f,enableMassClear:g,enableDragging:c,enableClicking:p,raiseOnDrag:o,draggingCursor:O,rotation:v,title:h,icon:D,zIndex:m,visible:k}=t,z={offset:new BMapGL.Size(f.x,f.y),enableMassClear:g,enableDragging:c,enableClicking:p,raiseOnDrag:o,draggingCursor:O,title:h};D&&(z.icon=M()),n=new BMapGL.Marker(new BMapGL.Point(r.lng,r.lat),z),B(v),x(m)&&G(m),k&&e.addOverlay(n),_(t,i,n),S(e,n)};return u(),s(()=>t.position,w(r=>{n?L(r):u()}),{deep:!0}),s(()=>t.icon,w(y),{deep:!0}),s(()=>t.offset,w(I),{deep:!0}),s(()=>t.enableDragging,b),s(()=>t.enableMassClear,q),s(()=>t.rotation,B),s(()=>t.visible,r=>{e[r?"addOverlay":"removeOverlay"](n)}),l});U("getOverlayInstance",()=>n);function M(){const e=E(),{icon:l}=t;if(P(l)&&e[l])return e[l];{const{anchor:u,imageOffset:r,imageSize:f,imageUrl:g,printImageUrl:c,size:p}=l,o={size:new BMapGL.Size(p.width,p.height)};return f&&(o.imageSize=new BMapGL.Size(f.width,f.height)),u&&(o.anchor=new BMapGL.Size(u.x,u.y)),r&&(o.imageOffset=new BMapGL.Size(r.x,r.y)),c&&(o.printImageUrl=c),new BMapGL.Icon(g,new BMapGL.Size(p.width,p.height),o)}}function G(e){n.setZIndex(e)}function L(e){e&&e.lat&&e.lng&&n.setPosition(new BMapGL.Point(e.lng,e.lat))}function y(){n.setIcon(M())}function b(e){e?n.enableDragging():n.disableDragging()}function q(e){e?n.enableMassClear():n.disableMassClear()}function I(e){e&&n.setOffset(new BMapGL.Size(e.x,e.y))}function B(e){e!==void 0&&n.setRotation(e)}return(e,l)=>j(e.$slots,"default")}}));N.__file="packages/components/overlay/marker/index.vue";export{N as s};
