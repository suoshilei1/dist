import{r as p,o as w,b as x,_ as R,w as U,c as u,d as k,e as D,I as g,U as b,J as M,i as $,g as B,N as C}from"./index-Bx6Y8L80.js";import{E as N}from"./date-picker-CfUXe-Kp.js";import"./input-CFaQgGx5.js";import"./scrollbar-DuXO1tWo.js";import"./popper-DBn8ulUn.js";import"./button-8bviUT_H.js";import{d as t}from"./dayjs.min-Cd48fqZ9.js";/* empty css             *//* empty css                 */import{E as m}from"./index-KJp6TXG9.js";function A(){const l=p(!1),c=()=>{l.value=window.innerWidth<=768};return w(()=>{c(),window.addEventListener("resize",c)}),x(()=>{window.removeEventListener("resize",c)}),l}const z={key:0,class:"mobile-date-picker"},I={class:"mobile-date-input"},L={class:"separator"},T={class:"mobile-date-input"},j={__name:"CustomDatePicker",props:{modelValue:{type:[Array,Number],required:!0},isRange:{type:Boolean,default:!0},isMonthPicker:{type:Boolean,default:!1},maxDays:{type:Number,default:90,validator:l=>l>0},minDays:{type:Number,default:0,validator:l=>l>=0}},emits:["update:modelValue"],setup(l,{emit:c}){const o=l,s=c,P=A(),h=p(null),f=p(null),d=p(null),i=p(null);U(()=>o.modelValue,e=>{o.isRange?Array.isArray(e)&&(h.value=e,d.value=e[0],i.value=e[1]):f.value=e},{immediate:!0});const v=e=>{if(o.isMonthPicker){const a=t(e).startOf("month").valueOf(),n=t(e).endOf("month").valueOf();return[a,n]}else{const a=t(e).startOf("day").valueOf(),n=t(e).endOf("day").valueOf();return[a,n]}},y=e=>{const a=t();return!!t(e).isAfter(a)},S=e=>{if(!e)return;let[a,n]=e;(o.isMonthPicker?t(a).isSame(t(n),"month"):t(a).isSame(t(n),"day"))&&([a,n]=v(a));const r=t(n).diff(t(a),"day");if(r>o.maxDays){m.error(`日期范围不能超过 ${o.maxDays} 天`),h.value=null;return}if(r<o.minDays){m.error(`日期范围不能小于 ${o.minDays} 天`),h.value=null;return}s("update:modelValue",[a,n])},V=e=>{if(e)if(o.isMonthPicker){const[a,n]=v(e);s("update:modelValue",a)}else s("update:modelValue",e)},E=e=>{if(!e){d.value=null;return}if(i.value){const a=t(i.value).diff(t(e),"day");if(a>o.maxDays){m.error(`日期范围不能超过 ${o.maxDays} 天`),d.value=null;return}if(a<o.minDays){m.error(`日期范围不能小于 ${o.minDays} 天`),d.value=null;return}if(o.isMonthPicker?t(e).isSame(t(i.value),"month"):t(e).isSame(t(i.value),"day")){const[n,r]=v(e);s("update:modelValue",[n,r]);return}s("update:modelValue",[e,i.value])}},O=e=>{if(!e){i.value=null;return}if(d.value){const a=t(e).diff(t(d.value),"day");if(a>o.maxDays){m.error(`日期范围不能超过 ${o.maxDays} 天`),i.value=null;return}if(a<o.minDays){m.error(`日期范围不能小于 ${o.minDays} 天`),i.value=null;return}if(o.isMonthPicker?t(e).isSame(t(d.value),"month"):t(e).isSame(t(d.value),"day")){const[n,r]=v(e);s("update:modelValue",[n,r]);return}s("update:modelValue",[d.value,e])}};return(e,a)=>{const n=N;return u(),k("div",{class:C(["filter-header",{"filter-header--mobile":g(P)}])},[D("div",{class:C(["date-picker-wrapper",{"date-picker-wrapper--mobile":g(P)}])},[g(P)?(u(),k(b,{key:1},[l.isRange?(u(),k("div",z,[D("div",I,[$(n,{style:{width:"8rem"},modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=r=>d.value=r),type:l.isMonthPicker?"month":"date",placeholder:e.$t(l.isMonthPicker?"monthPlaceholderStart":"datePlaceholderStart"),"disabled-date":y,"value-format":"x",onChange:E},null,8,["modelValue","type","placeholder"])]),D("span",L,B(e.$t("date.to")),1),D("div",T,[$(n,{style:{width:"8rem"},modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=r=>i.value=r),type:l.isMonthPicker?"month":"date",placeholder:e.$t(l.isMonthPicker?"monthPlaceholderEnd":"datePlaceholderEnd"),"disabled-date":y,"value-format":"x",onChange:O},null,8,["modelValue","type","placeholder"])])])):(u(),M(n,{key:1,modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=r=>f.value=r),type:l.isMonthPicker?"month":"date",placeholder:e.$t(l.isMonthPicker?"monthPlaceholder":"datePlaceholder"),"value-format":"x","disabled-date":y,onChange:V,class:"date-picker"},null,8,["modelValue","type","placeholder"]))],64)):(u(),k(b,{key:0},[l.isRange?(u(),M(n,{key:0,modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=r=>h.value=r),type:l.isMonthPicker?"monthrange":"daterange","unlink-panels":"","range-separator":e.$t("date.to"),"start-placeholder":e.$t(l.isMonthPicker?"monthPlaceholderStart":"datePlaceholderStart"),"end-placeholder":e.$t(l.isMonthPicker?"monthPlaceholderEnd":"datePlaceholderEnd"),"disabled-date":y,"value-format":"x",onChange:S,class:"date-picker"},null,8,["modelValue","type","range-separator","start-placeholder","end-placeholder"])):(u(),M(n,{key:1,modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=r=>f.value=r),type:l.isMonthPicker?"month":"date",placeholder:e.$t(l.isMonthPicker?"monthPlaceholder":"datePlaceholder"),"value-format":"x","disabled-date":y,onChange:V,class:"date-picker"},null,8,["modelValue","type","placeholder"]))],64))],2)],2)}}},Z=R(j,[["__scopeId","data-v-121aa6ed"]]);export{Z as C};
