import{o as D,T as I,ab as N,H as C,ah as $,E as T,F as A,aE as F,bM as x,w as U,bN as j,bO as q,bP as K,bQ as Q,aB as y,z as V,C as k,D as G,i as J,M as L,aq as Z}from"./index-Bx6Y8L80.js";import{t as _}from"./index-CuyxIfpa.js";import{g as R}from"./scroll-BawlEUY1.js";import{P as h}from"./vnode-DK7gyQZj.js";const ie=(e,o,n,s)=>{let a={offsetX:0,offsetY:0};const c=i=>{const f=i.clientX,Y=i.clientY,{offsetX:v,offsetY:p}=a,d=e.value.getBoundingClientRect(),b=d.left,M=d.top,O=d.width,S=d.height,P=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-b+v,X=-M+p,z=P-b-O+v,W=B-M-S+p,g=E=>{let r=v+E.clientX-f,m=p+E.clientY-Y;s!=null&&s.value||(r=Math.min(Math.max(r,H),z),m=Math.min(Math.max(m,X),W)),a={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${C(r)}, ${C(m)})`)},w=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",w)},t=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",c)},l=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",c)},u=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return D(()=>{I(()=>{n.value?t():l()})}),N(()=>{l()}),{resetPosition:u}},de=(e,o={})=>{$(e)||_("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||T("popup"),s=A(()=>n.bm("parent","hidden"));if(!F||x(document.body,s.value))return;let a=0,c=!1,t="0";const l=()=>{setTimeout(()=>{typeof document>"u"||(Q(document==null?void 0:document.body,s.value),c&&document&&(document.body.style.width=t))},200)};U(e,u=>{if(!u){l();return}c=!x(document.body,s.value),c&&(t=document.body.style.width),a=R(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=j(document.body,"overflowY");a>0&&(i||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`),q(document.body,s.value)}),K(()=>l())},ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},te=V({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),oe={click:e=>e instanceof MouseEvent},ne="overlay";var se=G({name:"ElOverlay",props:te,emits:oe,setup(e,{slots:o,emit:n}){const s=T(ne),a=u=>{n("click",u)},{onClick:c,onMousedown:t,onMouseup:l}=ee(e.customMaskEvent?void 0:a);return()=>e.mask?J("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:t,onMouseup:l},[L(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):Z("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[L(o,"default")])}});const re=se;export{re as E,de as a,ee as b,ie as u};
