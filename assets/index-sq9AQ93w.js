const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DynamicDataAnalysis-CrXLd9pU.js","assets/index-Bx6Y8L80.js","assets/index-CKGHOdoA.css","assets/meter-5sbrBbgq.js","assets/dayjs.min-Cd48fqZ9.js","assets/BaseChart-DcPP-dUj.js","assets/DebounceAndThrottle-B_grFKK4.js","assets/installCanvasRenderer-7dDAEUGk.js","assets/BaseChart-CwpsWgYi.css","assets/index-KJp6TXG9.js","assets/index-CuyxIfpa.js","assets/plugin-vue_export-helper-CqGSI99y.js","assets/index-A4BGBRGh.js","assets/index-iw6eP590.js","assets/icon-6zrsquxY.js","assets/aria-BUADUvnR.js","assets/DynamicDataAnalysis-Dw06gXI_.css","assets/base-CMRK1q-d.css","assets/el-badge-BWN_0xb6.css","assets/DynamicDataTable-9JDb5BOh.js","assets/pagination-BWpx24Am.js","assets/select-BmMHn9PT.js","assets/popper-DBn8ulUn.js","assets/focus-trap-Ddg061Nm.js","assets/use-form-item-50hJ8Ppj.js","assets/popper-CLIXM2zs.css","assets/scrollbar-DuXO1tWo.js","assets/scrollbar-C4q0Zfda.css","assets/index-aFn2MKle.js","assets/castArray-CrUPC_Z8.js","assets/scroll-BawlEUY1.js","assets/isEqual-BM-Gj-iT.js","assets/_Uint8Array-B6mJ0Xm4.js","assets/_baseIteratee-CkjM3wkz.js","assets/index-zrRcpBp4.js","assets/select-BgyzP3al.css","assets/input-CFaQgGx5.js","assets/input-CvX03x0l.css","assets/index-AkNVqhGZ.js","assets/pagination-C6JdIW2O.css","assets/table-column-DjUxz4le.js","assets/checkbox-LjaCbo-5.js","assets/checkbox-DD4l_ypT.css","assets/_initCloneObject-nnMrnZRY.js","assets/table-column-CzPu3YYC.css","assets/button-8bviUT_H.js","assets/button-CzpQr9Wb.css","assets/DynamicDataTable-C1dQQN2H.css","assets/tag-B2cUah5Z.css","assets/tooltip-BV7R58v2.css"])))=>i.map(i=>d[i]);
import{_ as A,r as p,F as O,w as P,c as _,J as D,j as o,i as t,e as a,n as V,g as b,I as y,af as $,W as j,T as H,d as k,Y as K,N as U,h as W,aU as q,K as F,a3 as x,v as J,a4 as R}from"./index-Bx6Y8L80.js";import{E as Y}from"./empty-CF5nbTvc.js";/* empty css                */import{E as G}from"./popper-DBn8ulUn.js";import{E as Q}from"./link-CIadGe25.js";import{E as X}from"./card-fNeABwz5.js";import{C as Z}from"./CustomDatePicker-CX6MdPmZ.js";import{q as ee}from"./meter-5sbrBbgq.js";import{E as te,a as ae}from"./table-column-DjUxz4le.js";import"./checkbox-LjaCbo-5.js";import"./scrollbar-DuXO1tWo.js";import{E as oe}from"./button-8bviUT_H.js";/* empty css            */import{u as le}from"./area-COPnz-hV.js";import{d as I}from"./dayjs.min-Cd48fqZ9.js";/* empty css             *//* empty css                 */import{E as M}from"./index-KJp6TXG9.js";import{E as re}from"./index-A4BGBRGh.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./use-form-item-50hJ8Ppj.js";import"./index-CuyxIfpa.js";import"./aria-BUADUvnR.js";import"./focus-trap-Ddg061Nm.js";import"./icon-6zrsquxY.js";import"./date-picker-CfUXe-Kp.js";import"./input-CFaQgGx5.js";import"./index-iw6eP590.js";import"./index-DLcTS03G.js";import"./index-zrRcpBp4.js";import"./isEqual-BM-Gj-iT.js";import"./_Uint8Array-B6mJ0Xm4.js";import"./_baseIteratee-CkjM3wkz.js";import"./_initCloneObject-nnMrnZRY.js";import"./index-AkNVqhGZ.js";const se={class:"ellipsis-cell"},ne={__name:"StaticDataAnalysis",props:{meterList:{type:Array,default:()=>[]},selectedMeterId:{type:Number,default:null}},emits:["rowClick","toggleView"],setup(E,{emit:n}){const f=E,u=n,v=p(null),h=O(()=>f.selectedMeterId);P(()=>f.selectedMeterId,c=>{!c&&v.value&&v.value.setCurrentRow(null)});const C=le();function m(c){u("rowClick",c)}function i(c){return c>0}return(c,l)=>{const s=te,g=oe,w=ae;return _(),D(w,{style:{height:"100%"},data:E.meterList,onRowClick:m,"highlight-current-row":"","current-row-key":h.value,ref_key:"tableRef",ref:v},{default:o(()=>[t(s,{label:"表计编号"},{default:o(e=>[a("span",{style:V({color:i(e.row.value)?"red":""})},b(e.row.meter_code),5)]),_:1}),t(s,{prop:"area_id",label:"所供区域","show-overflow-tooltip":""},{default:o(e=>[a("div",se,[a("span",null,b(y(C).getAreaNameById(e.row.area_id)),1)])]),_:1}),t(s,{prop:"value",label:"最小值"}),t(s,{prop:"time",label:"最小值时间"},{default:o(e=>[a("span",{style:V({color:i(e.row.value)?"red":""})},b(y(I)(e.row.time).format("MM-DD HH:mm")),5)]),_:1}),t(s,{width:"150px",label:"操作"},{default:o(e=>[t(g,{size:"small",type:"primary",onClick:l[0]||(l[0]=r=>u("toggleView","chart"))},{icon:o(()=>l[2]||(l[2]=[a("i",{class:"fa fa-line-chart"},null,-1)])),_:1}),t(g,{size:"small",type:"success",onClick:l[1]||(l[1]=r=>u("toggleView","table"))},{icon:o(()=>l[3]||(l[3]=[a("i",{class:"fa fa-table"},null,-1)])),_:1})]),_:1})]),_:1},8,["data","current-row-key"])}}},ie=A(ne,[["__scopeId","data-v-f68b38e6"]]),ce={class:"layout-wrapper"},de={class:"left-content"},me={class:"meter-list"},ue={class:"filter-section"},pe={class:"right-content"},_e={class:"card-header"},fe={key:0,class:"header-actions"},ve={class:"view-toggle"},ye={class:"chart-container"},he={__name:"index",setup(E){const n=p("chart"),f=e=>{typeof e=="string"?n.value=e:n.value=n.value==="chart"?"table":"chart",h.value=n.value==="chart"?u:v};let u=x(()=>R(()=>import("./DynamicDataAnalysis-CrXLd9pU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),v=x(()=>R(()=>import("./DynamicDataTable-9JDb5BOh.js"),__vite__mapDeps([19,1,2,20,12,11,14,21,22,10,15,23,24,25,26,27,28,29,13,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,4,3,9,47,48,49])));const h=$(u),C=[I().subtract(3,"day").startOf("day").valueOf(),I().subtract(1,"day").endOf("day").valueOf()],m=p(C),i=p(null),c=e=>{i.value=e.id};let l=p([]),s=p(!1);const g=async(e,r)=>{s.value=!0;try{let d=await ee({id:w,start_time:e,end_time:r});if(d.code!==200){M.error(d.message||"静态分析统计失败"),console.error(d);return}l.value=d.data}catch{M.error("服务器异常，静态分析统计失败")}finally{s.value=!1}},w=j().currentCompany.id;return H(()=>{var e,r;w&&g((e=m.value)==null?void 0:e[0],(r=m.value)==null?void 0:r[1])}),(e,r)=>{const d=X,L=Q,S=G,T=re,z=Y,B=J;return _(),k("div",ce,[a("div",de,[K((_(),k("div",me,[t(d,{shadow:"never",style:{height:"100%",overflow:"auto"},header:"静态数据分析"},{default:o(()=>[a("div",ue,[t(Z,{"is-range":!0,"max-days":4,modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=N=>m.value=N)},null,8,["modelValue"])]),t(ie,{selectedMeterId:i.value,onToggleView:f,meterList:y(l),onRowClick:c},null,8,["selectedMeterId","meterList"])]),_:1})])),[[B,y(s)]])]),a("div",pe,[t(d,{style:{height:"100%",display:"flex","flex-direction":"column"}},{header:o(()=>[a("div",_e,[r[1]||(r[1]=a("span",null,"动态数据分析",-1)),i.value?(_(),k("div",fe,[a("div",ve,[t(S,{content:n.value==="chart"?"切换为表格视图":"切换为图表视图",placement:"top"},{default:o(()=>[t(L,{underline:!1,onClick:f},{default:o(()=>[a("i",{class:U(["fa",n.value==="chart"?"fa-table":"fa-line-chart"]),style:{"font-size":"1.2rem"}},null,2)]),_:1})]),_:1},8,["content"])])])):W("",!0)])]),default:o(()=>[a("div",ye,[i.value?(_(),D(F(h.value),{key:1,id:i.value,dateRange:m.value},null,8,["id","dateRange"])):(_(),D(z,{key:0,description:"请在左侧选择表计以查看动态分析数据","image-size":200},{image:o(()=>[t(T,{style:{"font-size":"100px",color:"var(--el-text-color-secondary)"}},{default:o(()=>[t(y(q))]),_:1})]),_:1}))])]),_:1})])])}}},et=A(he,[["__scopeId","data-v-0b1cc7c7"]]);export{et as default};
