import{_ as S,i as g,u as M,r as c,W as f,c as h,d as T,k as n,l as m,e as p,g as d,f as v,F as P}from"./index-DWtISIBF.js";import{E as b}from"./button-DfREtLL_.js";import{C as k}from"./CompanyDialog-CfbOzTAZ.js";import{s as z}from"./useParentComponentEffect-DPTUSRTe.js";import{s as R}from"./index.vue-cqg6ZM2y.js";import{s as O}from"./index.vue-BlwWegdC.js";import"./index-CuP5NVML.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./index-DjvbDGpK.js";import"./use-form-item-CuJrx89H.js";import"./icon-Cc3ZZocH.js";import"./form-item-ijUMtc9_.js";import"./castArray-6TPyo715.js";import"./index-CVAPKPs0.js";import"./_Uint8Array-DaZSNKBQ.js";import"./_initCloneObject-ChNElRpx.js";import"./autocomplete-DkTQJXpJ.js";import"./input-B0bTKLmJ.js";import"./index-DibVzrKz.js";import"./scrollbar-BMOxp_jN.js";import"./popper-BNb2tGl7.js";import"./aria-BUADUvnR.js";import"./focus-trap-D8pg8SM_.js";/* empty css            */import"./select-DYqyOwb9.js";import"./index-0A8HTOTd.js";import"./scroll-DMdoCUCr.js";import"./isEqual-DqXByToB.js";import"./_baseIteratee-FAqII4j1.js";import"./index-DfeXTFmx.js";import"./index-CZh1RU_w.js";import"./index-BTG_XGfc.js";import"./index-DxRU3L2W.js";import"./vnode-BIvhTfyw.js";import"./validator-CunO4hgy.js";const E="Kwc6trl7dmb2Go3SM6S5QueuW0Foa0QN",I={__name:"MapSelector",setup(i,{expose:e}){e();const s=g(),o=M(),u=c(s.query.id||null);let l=c("BMAP_NORMAL_MAP");const a=c({center:{lng:116.404,lat:39.915},zoom:12,location:""}),t=f(),C=r=>{a.value.center=r.latLng},B=({target:r})=>{a.value.zoom=+r.getZoom().toFixed()},A=r=>{l.value=r.target.value},_=()=>{t.currentCompany&&t.currentCompany.latitude>0&&t.currentCompany.longitude>0&&(a.value.center={lng:+t.currentCompany.longitude,lat:+t.currentCompany.latitude},a.value.zoom=+t.currentCompany.zoom||12,a.value.location=t.currentCompany.location||"")};_();const y={route:s,router:o,companyId:u,BAIDU_MAP_AK:E,get mapType(){return l},set mapType(r){l=r},mapState:a,companyStore:t,handleCenter:C,handleZoomEnd:B,handleMapTypeChange:A,handleInit:_,goBack:()=>{window.history.length>1?o.back():o.push({name:"Home"})},get useCompanyStore(){return f},ref:c,computed:P,get useRoute(){return g},get useRouter(){return M},get BMap(){return z},get BMarker(){return R},get BControl(){return O},CompanyForm:k};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},N={class:"container"},x=["value"],H={value:"BMAP_NORMAL_MAP"},D={value:"BMAP_SATELLITE_MAP"},F={value:"BMAP_EARTH_MAP"},L={class:"company-form"};function w(i,e,s,o,u,l){const a=b;return h(),T("div",N,[n(o.BMap,{width:"100%",height:"100%",ak:o.BAIDU_MAP_AK,enableScrollWheelZoom:!0,center:o.mapState.center,mapType:o.mapType,zoom:o.mapState.zoom,onZoomend:o.handleZoomEnd},{default:m(()=>[n(o.BMarker,{onDragend:o.handleCenter,enableDragging:"",position:o.mapState.center},null,8,["position"]),n(o.BControl,{anchor:"BMAP_ANCHOR_TOP_RIGHT",offset:{x:20,y:20},class:"custom-control"},{default:m(()=>[p("select",{class:"select",value:o.mapType,onChange:o.handleMapTypeChange},[p("option",H,d(i.$t("cityMap.normalMap")),1),p("option",D,d(i.$t("cityMap.satelliteMap")),1),p("option",F,d(i.$t("cityMap.earthMode")),1)],40,x)]),_:1}),n(o.BControl,{anchor:"BMAP_ANCHOR_TOP_LEFT",offset:{x:20,y:20},class:"custom-control"},{default:m(()=>[p("div",L,[n(o.CompanyForm,{latitude:o.mapState.center.lat,"onUpdate:latitude":e[0]||(e[0]=t=>o.mapState.center.lat=t),longitude:o.mapState.center.lng,"onUpdate:longitude":e[1]||(e[1]=t=>o.mapState.center.lng=t),zoom:o.mapState.zoom,"onUpdate:zoom":e[2]||(e[2]=t=>o.mapState.zoom=t),id:o.companyId},null,8,["latitude","longitude","zoom","id"])])]),_:1}),n(o.BControl,{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",offset:{x:20,y:20},class:"custom-control"},{default:m(()=>[n(a,{type:"info",class:"back-button",onClick:o.goBack},{default:m(()=>e[3]||(e[3]=[v(" 返回上一页 ")])),_:1})]),_:1})]),_:1},8,["center","mapType","zoom"])])}const To=S(I,[["render",w],["__scopeId","data-v-230b349b"],["__file","D:/临时存放/green-carbon-1.0/src/components/map/MapSelector.vue"]]);export{To as default};
