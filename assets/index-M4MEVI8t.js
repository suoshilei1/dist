import{_ as T,u as v,r as p,o as E,c as g,d as k,X as w,k as o,l as t,e as c,f as r,g as m,J as L,h as A,T as N,a$ as x,b0 as S,am as F,b1 as R,b2 as h,v as U}from"./index-DU5BV6sj.js";import{E as z}from"./dialog-BqmwFatm.js";import"./overlay-CaKmC84a.js";import{E as I}from"./card-CrntnV6K.js";import{E as j,a as q}from"./descriptions-item-gRtpPMql.js";/* empty css                */import{E as J}from"./popper-DmsXjoSL.js";/* empty css            */import{E as O}from"./button-C3fNXQ0E.js";import P from"./index-Dgni3gwA.js";import{C as X}from"./CompanyDialog-DxwW-0Hy.js";import{E as d}from"./index-BmwD9m8C.js";import{E as B}from"./index-B1KCpUhn.js";import{E as G}from"./index-DemxtX7w.js";import"./index-DspxDzgo.js";import"./scroll-b_nwKRMA.js";import"./vnode-CCieS0_D.js";import"./index-BCql8Cu-.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./icon-Lrcg122U.js";import"./focus-trap-BFH-jL9N.js";import"./aria-BUADUvnR.js";import"./refs-BkwxSs2a.js";import"./index-HfsxB2KS.js";import"./index-imETKNmt.js";import"./use-form-item-Bwue1zaK.js";import"./constants-DzFylwgb.js";import"./pagination-DUgTE-0K.js";import"./select-CVxfSd-L.js";import"./scrollbar-5YYltO8z.js";import"./castArray-C1OtMDCV.js";import"./index-DsemQHVw.js";import"./isEqual-Df5tNRy_.js";import"./_Uint8Array-ntTh0Oyk.js";import"./_baseIteratee-B5KIseQu.js";import"./index-BRz9a87F.js";import"./input-Cag95VNY.js";import"./table-column-9ftaDh-i.js";import"./checkbox-B_XNudq6.js";import"./_initCloneObject-CWYxvHbU.js";import"./empty-FpkiWcnp.js";import"./autocomplete-BgU4xmLg.js";import"./date-CToM-Ban.js";import"./dayjs.min-BzhD8rH5.js";import"./form-item-Da9sIxn1.js";import"./user-BYAcp0CO.js";import"./sha256-CZX8Myq4.js";/* empty css             *//* empty css                 */import"./DebounceAndThrottle-B_grFKK4.js";/* empty css                   */import"./validator-BURDFhOy.js";const H={__name:"index",setup(D,{expose:a}){a();const s=v(),e=p(null);e.value=s.currentRoute.value.query.id;const _=p(!1),f=p({}),l=p(!0);function n(){l.value=!0,_.value=!1,x({id:e.value}).then(i=>{i.code===200?f.value=i.data.companies[0]:d.error(i.message||"获取公司详情失败")}).catch(i=>{d.error(i.message||"获取公司详情失败")}).finally(()=>{l.value=!1})}E(()=>{n()});const u={router:s,id:e,dialogVisible:_,company:f,loading:l,getCompanyDetail:n,goBack:()=>{window.history.length>1?s.back():s.push("/home/company")},editCompany:()=>{_.value=!0},deleteCompany:()=>{B.confirm("确定要删除该公司吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{l.value=!0;try{const i=await h({id:+e.value});d.success("公司删除成功"),s.push({name:"CompanyManagement"})}catch(i){d.error(i.message||"删除公司失败")}finally{l.value=!1}}).catch(()=>{})},ref:p,onMounted:E,get Edit(){return S},get Delete(){return F},get Back(){return R},get useRouter(){return v},get ElMessage(){return d},get ElMessageBox(){return B},get deleteCompanyApi(){return h},get getCompanyListApi(){return x},UserTable:P,CompanyDialog:X};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}},K={class:"company-detail","element-loading-text":"Loading...","element-loading-background":"rgba(122, 122, 122, 0.1)"},Q={class:"header-left"},W={class:"header-right"},Y={class:"ellipsis"},Z={class:"box-card"};function $(D,a,s,e,_,f){const l=O,n=j,y=G,b=J,C=q,u=I,i=z,V=U;return g(),k(N,null,[w((g(),k("div",K,[o(u,{class:"box-card"},{header:t(()=>[c("div",Q,[o(l,{link:"",type:"primary",icon:e.Back,onClick:e.goBack},{default:t(()=>a[1]||(a[1]=[r("返回")])),_:1},8,["icon"]),a[2]||(a[2]=c("span",{class:"title-divider"},"|",-1)),a[3]||(a[3]=c("span",{class:"card-title"},"公司详情",-1))]),c("div",W,[o(l,{type:"primary",icon:e.Edit,size:"small",onClick:e.editCompany},{default:t(()=>a[4]||(a[4]=[r(" 编辑 ")])),_:1},8,["icon"]),o(l,{type:"danger",icon:e.Delete,size:"small",onClick:e.deleteCompany},{default:t(()=>a[5]||(a[5]=[r(" 删除 ")])),_:1},8,["icon"])])]),default:t(()=>[o(C,{class:"company-info-grid",title:"公司信息",column:5,border:""},{default:t(()=>[o(n,{label:"公司名称"},{default:t(()=>[r(m(e.company.name),1)]),_:1}),o(n,{label:"联系电话"},{default:t(()=>[r(m(e.company.phone),1)]),_:1}),o(n,{label:"状态"},{default:t(()=>[o(y,{type:e.company.status===1?"success":"danger",effect:"light"},{default:t(()=>[r(m(e.company.status===1?"可用":"不可用"),1)]),_:1},8,["type"])]),_:1}),o(n,{label:"行业代码"},{default:t(()=>[r(m(e.company.company_code),1)]),_:1}),o(n,{label:"行业"},{default:t(()=>[r(m(e.company.sector),1)]),_:1}),o(n,{label:"产品"},{default:t(()=>[r(m(e.company.product_name),1)]),_:1}),o(n,{label:"地址"},{default:t(()=>[r(m(e.company.location),1)]),_:1}),e.company.comment?(g(),L(n,{key:0,label:"备注"},{default:t(()=>[o(b,{class:"item",effect:"dark",content:e.company.comment,placement:"top"},{default:t(()=>[c("span",Y,m(e.company.comment),1)]),_:1},8,["content"])]),_:1})):A("",!0)]),_:1})]),_:1}),c("div",Z,[o(e.UserTable,{company_id:e.id},null,8,["company_id"])])])),[[V,e.loading]]),o(i,{title:"编辑公司","align-center":"",modelValue:e.dialogVisible,"onUpdate:modelValue":a[0]||(a[0]=M=>e.dialogVisible=M),"close-on-click-modal":!1},{default:t(()=>[o(e.CompanyDialog,{onFetchCompanyList:e.getCompanyDetail,id:e.id},null,8,["id"])]),_:1},8,["modelValue"])],64)}const Ze=T(H,[["render",$],["__scopeId","data-v-37474374"],["__file","D:/临时存放/green-carbon-1.0/src/views/SystemManagement/CompanyManagement/CompanyDetail/index.vue"]]);export{Ze as default};
