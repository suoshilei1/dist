import{_ as Y,u as Z,r as l,o as $,aV as ee,c as i,d as g,X as te,I as a,e as u,i as o,j as n,ah as h,T as C,U as S,J as E,f as w,g as f,k as ae,aW as oe,v as le}from"./index-oALI6hjD.js";import{E as se}from"./dialog-B_GDP7gC.js";import"./overlay-WqKCga-H.js";import{E as ne}from"./pagination-DXEjFwoH.js";/* empty css            */import{E as ie,a as re}from"./select-B0JZ5Vmm.js";import"./scrollbar-BwLVa3O8.js";import"./popper-8tqvLSZz.js";import{E as ue}from"./card-DUC90zSS.js";import{E as pe}from"./empty-BnW6BhO3.js";import{E as me}from"./button-CW4VZptJ.js";import{f as T}from"./date-LkHkg0he.js";import{_ as ce}from"./CompanyDialog-EKngB3-a.js";import{C as de}from"./CompanyAutoInput-DQQBCQTH.js";/* empty css             *//* empty css                        */import{E as _e}from"./index-BFWR71cx.js";import{E as ge}from"./index-ClN0XSgQ.js";import{E as fe}from"./index-DXOgsKzf.js";import"./index-JdeAZNwx.js";import"./index-Ci2yyUHC.js";import"./scroll-BUhzRsoy.js";import"./vnode-DAFY4x8G.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./icon-DFUaFmZd.js";import"./focus-trap-B9jhWFgs.js";import"./aria-BUADUvnR.js";import"./refs-sNzFHjPI.js";import"./index-GdZBC0LW.js";import"./use-form-item-CJ5jT23N.js";import"./index-BTnVmvBQ.js";import"./isEqual-DERyOhzh.js";import"./_Uint8Array-Cyhry7Ym.js";import"./input-_j8YarB1.js";import"./castArray-DuUCQlE9.js";import"./_baseIteratee-_-ChXyeP.js";import"./index-CPa7yTdP.js";import"./dayjs.min-VPOC9PSa.js";import"./form-item-JkdAUXjO.js";import"./_initCloneObject-CeA08_Bb.js";import"./autocomplete-N5BG9fbW.js";import"./index-CV7ElbEQ.js";import"./index-DKbZ_y2J.js";import"./validator-DaZaXEYL.js";const ve={class:"company-list",style:{height:"100%"},"element-loading-text":"Loading...","element-loading-background":"rgba(122, 122, 122, 0.1)"},ye={class:"search-bar"},he={class:"company-cards"},Ce={class:"card-body"},Ee={class:"company-sector"},be={class:"time-info"},ke={__name:"index",setup(Ve){let D=Z(),b=l(""),p=l(""),m=l(""),c=l(""),k=l([]),V=l(1),x=l(20),z=l(0),B=l([]),N=l([]),d=l(!1),_=l(null),v=l(!1);const F=()=>{b.value="",p.value="",m.value="",c.value="",r()};$(()=>{r()});const r=()=>{v.value=!0,_.value=null,d.value=!1;const s={offset:x.value*(V.value-1),limit:x.value,name:b.value,status:p.value,sector:m.value,product_name:c.value};ee(s).then(t=>{t.code===200?(k.value=t.data.companies,B.value=t.available_list.sector,N.value=t.available_list.product_name,z.value=t.data.total):U("获取公司列表失败",t.message)}).catch(t=>{U("获取公司列表失败",t.message)}).finally(()=>{v.value=!1})},U=(s,t)=>{_e({title:s,message:t||"操作失败，请稍后重试",type:"error",duration:5e3,position:"top-right"})};function M(s){b.value=s.name,r()}const O=()=>{_.value=null,D.push({name:"MapSelector",query:{from:"CompanyList"}})},q=s=>{_.value=s.id,d.value=!0},A=s=>{D.push({name:"CompanyDetail",query:{id:s}})},R=s=>{V.value=s,r()};return(s,t)=>{var P;const y=ie,L=re,I=me,j=pe,J=ge,K=fe,W=ue,X=ne,G=se,H=le;return i(),g(C,null,[te((i(),g("div",ve,[u("div",ye,[o(de,{style:{"margin-right":"1rem"},onSelect:M}),o(L,{modelValue:a(p),"onUpdate:modelValue":t[0]||(t[0]=e=>h(p)?p.value=e:p=e),placeholder:"选择状态",class:"status-select",onChange:r},{default:n(()=>[o(y,{label:"在用",value:1}),o(y,{label:"停用",value:2})]),_:1},8,["modelValue"]),o(L,{modelValue:a(m),"onUpdate:modelValue":t[1]||(t[1]=e=>h(m)?m.value=e:m=e),placeholder:"选择行业",class:"sector-select",onChange:r},{default:n(()=>[(i(!0),g(C,null,S(a(B),e=>(i(),E(y,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(L,{modelValue:a(c),"onUpdate:modelValue":t[2]||(t[2]=e=>h(c)?c.value=e:c=e),placeholder:"选择产品",class:"product-select",onChange:r},{default:n(()=>[(i(!0),g(C,null,S(a(N),e=>(i(),E(y,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(I,{type:"primary",onClick:F,class:"reset-button"},{default:n(()=>t[4]||(t[4]=[w("重置")])),_:1}),o(I,{type:"primary",onClick:O,class:"add-button"},{default:n(()=>t[5]||(t[5]=[w("新增公司")])),_:1})]),u("div",he,[!((P=a(k))!=null&&P.length)&&!a(v)?(i(),E(j,{key:0,description:"暂无数据",style:{width:"100%",height:"100%"}})):(i(!0),g(C,{key:1},S(a(k),e=>(i(),E(W,{key:e.id,class:"company-card",shadow:"hover",onClick:Q=>A(e.id)},{header:n(()=>[o(J,{type:e.status===1?"success":"danger",class:"status-tag",effect:"plain",size:"small"},{default:n(()=>[w(f(e.status===1?"在用":"停用"),1)]),_:2},1032,["type"]),o(K,{class:"settings-icon",size:"1.4rem",onClick:ae(Q=>q(e),["stop"])},{default:n(()=>[o(a(oe))]),_:2},1032,["onClick"])]),default:n(()=>[u("div",Ce,[u("h3",null,f(e.name),1),u("p",Ee,f(e.sector||"暂无"),1),u("div",be,[u("span",null,"创建："+f(a(T)(e.created_at)),1),u("span",null,"更新："+f(a(T)(e.updated_at)),1)])])]),_:2},1032,["onClick"]))),128))]),o(X,{onCurrentChange:R,"current-page":a(V),"page-size":a(x),total:a(z),"hide-on-single-page":!0,background:"","pager-count":5,layout:"prev, pager, next",class:"pagination"},null,8,["current-page","page-size","total"])])),[[H,a(v)]]),o(G,{class:"company-dialog",title:a(_)?"编辑公司":"新增公司","align-center":"",modelValue:a(d),"onUpdate:modelValue":t[3]||(t[3]=e=>h(d)?d.value=e:d=e)},{default:n(()=>[o(ce,{onFetchCompanyList:r,id:a(_)},null,8,["id"])]),_:1},8,["title","modelValue"])],64)}}},gt=Y(ke,[["__scopeId","data-v-e90bc5c7"]]);export{gt as default};
