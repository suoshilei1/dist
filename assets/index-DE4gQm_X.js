const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DynamicDataAnalysis-CGRFEONK.js","assets/index-DU5BV6sj.js","assets/index-CKGHOdoA.css","assets/meter-CawyXifQ.js","assets/dayjs.min-BzhD8rH5.js","assets/BaseChart-DytcZ6H2.js","assets/installCanvasRenderer-COQy7h5q.js","assets/DebounceAndThrottle-B_grFKK4.js","assets/BaseChart--RVKt3gE.css","assets/index-BmwD9m8C.js","assets/index-imETKNmt.js","assets/plugin-vue_export-helper-CqGSI99y.js","assets/index-BCql8Cu-.js","assets/index-DsemQHVw.js","assets/icon-Lrcg122U.js","assets/aria-BUADUvnR.js","assets/DynamicDataAnalysis-BvvBLiYK.css","assets/base-CMRK1q-d.css","assets/el-badge-BWN_0xb6.css","assets/DynamicDataTable-CMguQG36.js","assets/pagination-DUgTE-0K.js","assets/select-CVxfSd-L.js","assets/popper-DmsXjoSL.js","assets/focus-trap-BFH-jL9N.js","assets/use-form-item-Bwue1zaK.js","assets/popper-CLIXM2zs.css","assets/scrollbar-5YYltO8z.js","assets/scrollbar-C4q0Zfda.css","assets/index-DemxtX7w.js","assets/castArray-C1OtMDCV.js","assets/scroll-b_nwKRMA.js","assets/isEqual-Df5tNRy_.js","assets/_Uint8Array-ntTh0Oyk.js","assets/_baseIteratee-B5KIseQu.js","assets/index-BRz9a87F.js","assets/select-BgyzP3al.css","assets/input-Cag95VNY.js","assets/input-CvX03x0l.css","assets/index-HfsxB2KS.js","assets/pagination-C6JdIW2O.css","assets/table-column-9ftaDh-i.js","assets/checkbox-B_XNudq6.js","assets/checkbox-DD4l_ypT.css","assets/_initCloneObject-CWYxvHbU.js","assets/table-column-CzPu3YYC.css","assets/button-C3fNXQ0E.js","assets/button-CzpQr9Wb.css","assets/DynamicDataTable-DlWhkZB5.css","assets/tag-B2cUah5Z.css","assets/tooltip-BV7R58v2.css"])))=>i.map(i=>d[i]);
import{_ as B,r as f,F as S,w as I,c as g,J as A,l,k as o,e as n,n as L,g as D,al as R,V as x,ab as T,d as k,X as N,N as P,h as H,K as F,a7 as E,aW as K,a_ as q,v as J,a8 as O}from"./index-DU5BV6sj.js";import{E as U}from"./empty-FpkiWcnp.js";/* empty css                */import{E as X}from"./popper-DmsXjoSL.js";import{E as G}from"./link-Ca8Dd7lC.js";import{E as Q}from"./card-CrntnV6K.js";import{C as Y}from"./CustomDatePicker-DwR5Ke4u.js";import{q as z}from"./meter-CawyXifQ.js";import{E as Z,a as $}from"./table-column-9ftaDh-i.js";import"./checkbox-B_XNudq6.js";import"./scrollbar-5YYltO8z.js";import{E as ee}from"./button-C3fNXQ0E.js";/* empty css            */import{u as W}from"./area-CYcRQDxZ.js";import{d as b}from"./dayjs.min-BzhD8rH5.js";/* empty css             *//* empty css                 */import{E as j}from"./index-BmwD9m8C.js";import{E as te}from"./index-BCql8Cu-.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./use-form-item-Bwue1zaK.js";import"./index-imETKNmt.js";import"./aria-BUADUvnR.js";import"./focus-trap-BFH-jL9N.js";import"./icon-Lrcg122U.js";import"./date-picker-3aSnRp6y.js";import"./input-Cag95VNY.js";import"./index-DsemQHVw.js";import"./index-BcLR6-Z9.js";import"./index-BRz9a87F.js";import"./isEqual-Df5tNRy_.js";import"./_Uint8Array-ntTh0Oyk.js";import"./_baseIteratee-B5KIseQu.js";import"./_initCloneObject-CWYxvHbU.js";import"./index-HfsxB2KS.js";const ae={__name:"StaticDataAnalysis",props:{meterList:{type:Array,default:()=>[]},selectedMeterId:{type:Number,default:null}},emits:["rowClick","toggleView"],setup(w,{expose:t,emit:c}){t();const e=w,d=c,m=f(null),s=S(()=>e.selectedMeterId);I(()=>e.selectedMeterId,i=>{!i&&m.value&&m.value.setCurrentRow(null)});const _=W();function u(i){d("rowClick",i)}function r(i){return i>0}const p={props:e,emit:d,tableRef:m,currentRowKey:s,areaStore:_,handleMeterClick:u,isLeaked:r,get useAreaStore(){return W},get dayjs(){return b},ref:f,computed:S,watch:I};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},re={class:"ellipsis-cell"};function oe(w,t,c,e,d,m){const s=Z,_=ee,u=$;return g(),A(u,{style:{height:"100%"},data:c.meterList,onRowClick:e.handleMeterClick,"highlight-current-row":"","current-row-key":e.currentRowKey,ref:"tableRef"},{default:l(()=>[o(s,{label:"表计编号"},{default:l(r=>[n("span",{style:L({color:e.isLeaked(r.row.value)?"red":""})},D(r.row.meter_code),5)]),_:1}),o(s,{prop:"area_id",label:"所供区域","show-overflow-tooltip":""},{default:l(r=>[n("div",re,[n("span",null,D(e.areaStore.getAreaNameById(r.row.area_id)),1)])]),_:1}),o(s,{prop:"value",label:"最小值"}),o(s,{prop:"time",label:"最小值时间"},{default:l(r=>[n("span",{style:L({color:e.isLeaked(r.row.value)?"red":""})},D(e.dayjs(r.row.time).format("MM-DD HH:mm")),5)]),_:1}),o(s,{width:"150px",label:"操作"},{default:l(r=>[o(_,{size:"small",type:"primary",onClick:t[0]||(t[0]=p=>e.emit("toggleView","chart"))},{icon:l(()=>t[2]||(t[2]=[n("i",{class:"fa fa-line-chart"},null,-1)])),_:1}),o(_,{size:"small",type:"success",onClick:t[1]||(t[1]=p=>e.emit("toggleView","table"))},{icon:l(()=>t[3]||(t[3]=[n("i",{class:"fa fa-table"},null,-1)])),_:1})]),_:1})]),_:1},8,["data","current-row-key"])}const ne=B(ae,[["render",oe],["__scopeId","data-v-9b1699b5"],["__file","D:/临时存放/green-carbon-1.0/src/views/WarningCenter/WaterLeakageAnalysis/components/StaticDataAnalysis.vue"]]),le={__name:"index",setup(w,{expose:t}){t();const c=f("chart"),e=a=>{typeof a=="string"?c.value=a:c.value=c.value==="chart"?"table":"chart",s.value=c.value==="chart"?d:m};let d=E(()=>O(()=>import("./DynamicDataAnalysis-CGRFEONK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),m=E(()=>O(()=>import("./DynamicDataTable-CMguQG36.js"),__vite__mapDeps([19,1,2,20,12,11,14,21,22,10,15,23,24,25,26,27,28,29,13,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,4,3,9,47,48,49])));const s=R(d),_=[b().subtract(3,"day").startOf("day").valueOf(),b().subtract(1,"day").endOf("day").valueOf()],u=f(_),r=f(null),p=a=>{r.value=a.id};let i=f([]),y=f(!1);const V=async(a,h)=>{y.value=!0;try{let v=await z({id:C,start_time:a,end_time:h});if(v.code!==200){j.error(v.message||"静态分析统计失败"),console.error(v);return}i.value=v.data}catch{j.error("服务器异常，静态分析统计失败")}finally{y.value=!1}},C=x().currentCompany.id;T(()=>{var a,h;C&&V((a=u.value)==null?void 0:a[0],(h=u.value)==null?void 0:h[1])});const M={currentView:c,toggleView:e,get DynamicDataAnalysis(){return d},set DynamicDataAnalysis(a){d=a},get DynamicDataTable(){return m},set DynamicDataTable(a){m=a},currentComponent:s,defaultDateRange:_,dateRange:u,selectedMeterId:r,handleMeterClick:p,get meterList(){return i},set meterList(a){i=a},get loading(){return y},set loading(a){y=a},fetchMeterData:V,currentCompanyId:C,ref:f,watchEffect:T,shallowRef:R,get Close(){return K},get DataAnalysis(){return q},FilterHeader:Y,get useCompanyStore(){return x},get getWaterStaticApi(){return z},StaticDataAnalysis:ne,get dayjs(){return b},get getAsyncComponent(){return E}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}},se={class:"layout-wrapper"},ie={class:"left-content"},ce={class:"meter-list"},de={class:"filter-section"},me={class:"right-content"},_e={class:"card-header"},ue={key:0,class:"header-actions"},pe={class:"view-toggle"},fe={class:"chart-container"};function ye(w,t,c,e,d,m){const s=Q,_=G,u=X,r=te,p=U,i=J;return g(),k("div",se,[n("div",ie,[N((g(),k("div",ce,[o(s,{shadow:"never",style:{height:"100%",overflow:"auto"},header:"静态数据分析"},{default:l(()=>[n("div",de,[o(e.FilterHeader,{"is-range":!0,"max-days":4,modelValue:e.dateRange,"onUpdate:modelValue":t[0]||(t[0]=y=>e.dateRange=y)},null,8,["modelValue"])]),o(e.StaticDataAnalysis,{selectedMeterId:e.selectedMeterId,onToggleView:e.toggleView,meterList:e.meterList,onRowClick:e.handleMeterClick},null,8,["selectedMeterId","meterList"])]),_:1})])),[[i,e.loading]])]),n("div",me,[o(s,{style:{height:"100%",display:"flex","flex-direction":"column"}},{header:l(()=>[n("div",_e,[t[1]||(t[1]=n("span",null,"动态数据分析",-1)),e.selectedMeterId?(g(),k("div",ue,[n("div",pe,[o(u,{content:e.currentView==="chart"?"切换为表格视图":"切换为图表视图",placement:"top"},{default:l(()=>[o(_,{underline:!1,onClick:e.toggleView},{default:l(()=>[n("i",{class:P(["fa",e.currentView==="chart"?"fa-table":"fa-line-chart"]),style:{"font-size":"1.2rem"}},null,2)]),_:1})]),_:1},8,["content"])])])):H("",!0)])]),default:l(()=>[n("div",fe,[e.selectedMeterId?(g(),A(F(e.currentComponent),{key:1,id:e.selectedMeterId,dateRange:e.dateRange},null,8,["id","dateRange"])):(g(),A(p,{key:0,description:"请在左侧选择表计以查看动态分析数据","image-size":200},{image:l(()=>[o(r,{style:{"font-size":"100px",color:"var(--el-text-color-secondary)"}},{default:l(()=>[o(e.DataAnalysis)]),_:1})]),_:1}))])]),_:1})])])}const Ze=B(le,[["render",ye],["__scopeId","data-v-5f1dd1d9"],["__file","D:/临时存放/green-carbon-1.0/src/views/WarningCenter/WaterLeakageAnalysis/index.vue"]]);export{Ze as default};
