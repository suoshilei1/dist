import{_ as X,u as Z,r as l,o as $,aV as ee,c as i,d as g,Y as te,I as a,e as u,i as o,j as n,ah as h,U as C,V as S,J as E,f as w,g as f,k as ae,aW as oe,v as le}from"./index-Bx6Y8L80.js";import{E as se}from"./dialog-Dt2QUqOw.js";import"./overlay-04qnzRyj.js";import{E as ne}from"./pagination-BWpx24Am.js";/* empty css            */import{E as ie,a as re}from"./select-BmMHn9PT.js";import"./scrollbar-DuXO1tWo.js";import"./popper-DBn8ulUn.js";import{E as ue}from"./card-fNeABwz5.js";import{E as pe}from"./empty-CF5nbTvc.js";import{E as me}from"./button-8bviUT_H.js";import{f as F}from"./date-Cgy1PrMx.js";import{_ as ce}from"./CompanyDialog-CT6Yn9KG.js";import{C as de}from"./CompanyAutoInput-CFzAe0Ah.js";/* empty css             *//* empty css                        */import{E as _e}from"./index-CWCMyxJA.js";import{E as ge}from"./index-aFn2MKle.js";import{E as fe}from"./index-A4BGBRGh.js";import"./index-DZY-cmUL.js";import"./index-CuyxIfpa.js";import"./scroll-BawlEUY1.js";import"./vnode-DK7gyQZj.js";import"./plugin-vue_export-helper-CqGSI99y.js";import"./icon-6zrsquxY.js";import"./focus-trap-Ddg061Nm.js";import"./aria-BUADUvnR.js";import"./refs-Bp53MkJS.js";import"./index-AkNVqhGZ.js";import"./use-form-item-50hJ8Ppj.js";import"./index-iw6eP590.js";import"./isEqual-BM-Gj-iT.js";import"./_Uint8Array-B6mJ0Xm4.js";import"./input-CFaQgGx5.js";import"./castArray-CrUPC_Z8.js";import"./_baseIteratee-CkjM3wkz.js";import"./index-zrRcpBp4.js";import"./dayjs.min-Cd48fqZ9.js";import"./form-item-CWYWsPGl.js";import"./_initCloneObject-nnMrnZRY.js";import"./autocomplete-BsDCzI7r.js";import"./index-KJp6TXG9.js";import"./index-slq3sC_j.js";import"./validator-ulZFuTQV.js";const ve={class:"company-list",style:{height:"100%"},"element-loading-text":"Loading...","element-loading-background":"rgba(122, 122, 122, 0.1)"},ye={class:"search-bar"},he={class:"company-cards"},Ce={class:"card-body"},Ee={class:"company-sector"},be={class:"time-info"},Ve={__name:"index",setup(ke){let D=Z(),b=l(""),p=l(""),m=l(""),c=l(""),V=l([]),k=l(1),x=l(20),z=l(0),B=l([]),N=l([]),d=l(!1),_=l(null),v=l(!1);const M=()=>{b.value="",p.value="",m.value="",c.value="",r()};$(()=>{r()});const r=()=>{v.value=!0,_.value=null,d.value=!1;const s={offset:x.value*(k.value-1),limit:x.value,name:b.value,status:p.value,sector:m.value,product_name:c.value};ee(s).then(t=>{t.code===200?(V.value=t.data.companies,B.value=t.available_list.sector,N.value=t.available_list.product_name,z.value=t.data.total):U("获取公司列表失败",t.message)}).catch(t=>{U("获取公司列表失败",t.message)}).finally(()=>{v.value=!1})},U=(s,t)=>{_e({title:s,message:t||"操作失败，请稍后重试",type:"error",duration:5e3,position:"top-right"})};function O(s){b.value=s.name,r()}const T=()=>{_.value=null,D.push({name:"MapSelector",query:{from:"CompanyList"}})},q=s=>{_.value=s.id,d.value=!0},A=s=>{D.push({name:"CompanyDetail",query:{id:s}})},R=s=>{k.value=s,r()};return(s,t)=>{var P;const y=ie,L=re,I=me,j=pe,J=ge,K=fe,W=ue,Y=ne,G=se,H=le;return i(),g(C,null,[te((i(),g("div",ve,[u("div",ye,[o(de,{style:{"margin-right":"1rem"},onSelect:O}),o(L,{modelValue:a(p),"onUpdate:modelValue":t[0]||(t[0]=e=>h(p)?p.value=e:p=e),placeholder:"选择状态",class:"status-select",onChange:r},{default:n(()=>[o(y,{label:"在用",value:1}),o(y,{label:"停用",value:2})]),_:1},8,["modelValue"]),o(L,{modelValue:a(m),"onUpdate:modelValue":t[1]||(t[1]=e=>h(m)?m.value=e:m=e),placeholder:"选择行业",class:"sector-select",onChange:r},{default:n(()=>[(i(!0),g(C,null,S(a(B),e=>(i(),E(y,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(L,{modelValue:a(c),"onUpdate:modelValue":t[2]||(t[2]=e=>h(c)?c.value=e:c=e),placeholder:"选择产品",class:"product-select",onChange:r},{default:n(()=>[(i(!0),g(C,null,S(a(N),e=>(i(),E(y,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(I,{type:"primary",onClick:M,class:"reset-button"},{default:n(()=>t[4]||(t[4]=[w("重置")])),_:1}),o(I,{type:"primary",onClick:T,class:"add-button"},{default:n(()=>t[5]||(t[5]=[w("新增公司")])),_:1})]),u("div",he,[!((P=a(V))!=null&&P.length)&&!a(v)?(i(),E(j,{key:0,description:"暂无数据",style:{width:"100%",height:"100%"}})):(i(!0),g(C,{key:1},S(a(V),e=>(i(),E(W,{key:e.id,class:"company-card",shadow:"hover",onClick:Q=>A(e.id)},{header:n(()=>[o(J,{type:e.status===1?"success":"danger",class:"status-tag",effect:"plain",size:"small"},{default:n(()=>[w(f(e.status===1?"在用":"停用"),1)]),_:2},1032,["type"]),o(K,{class:"settings-icon",size:"1.4rem",onClick:ae(Q=>q(e),["stop"])},{default:n(()=>[o(a(oe))]),_:2},1032,["onClick"])]),default:n(()=>[u("div",Ce,[u("h3",null,f(e.name),1),u("p",Ee,f(e.sector||"暂无"),1),u("div",be,[u("span",null,"创建："+f(a(F)(e.created_at)),1),u("span",null,"更新："+f(a(F)(e.updated_at)),1)])])]),_:2},1032,["onClick"]))),128))]),o(Y,{onCurrentChange:R,"current-page":a(k),"page-size":a(x),total:a(z),"hide-on-single-page":!0,background:"","pager-count":5,layout:"prev, pager, next",class:"pagination"},null,8,["current-page","page-size","total"])])),[[H,a(v)]]),o(G,{class:"company-dialog",title:a(_)?"编辑公司":"新增公司","align-center":"",modelValue:a(d),"onUpdate:modelValue":t[3]||(t[3]=e=>h(d)?d.value=e:d=e)},{default:n(()=>[o(ce,{onFetchCompanyList:r,id:a(_)},null,8,["id"])]),_:1},8,["title","modelValue"])],64)}}},gt=X(Ve,[["__scopeId","data-v-e90bc5c7"]]);export{gt as default};
