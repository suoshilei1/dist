import{_ as C,r as y,ab as S,c as b,d as w,k as E,a$ as V}from"./index-DU5BV6sj.js";import{E as A}from"./autocomplete-BgU4xmLg.js";import"./input-Cag95VNY.js";import"./scrollbar-5YYltO8z.js";import"./popper-DmsXjoSL.js";import{E as p}from"./index-BmwD9m8C.js";const K={__name:"CompanyAutoInput",props:{size:{type:String,default:""},modelValue:{required:!0,type:Object}},emits:["update:modelValue","select"],setup(u,{expose:s,emit:l}){var g;s();let t=u,r=y(((g=t.modelValue)==null?void 0:g.name)??"");S(()=>{var e;r.value=((e=t.modelValue)==null?void 0:e.name)??""});let a=l;function c(e,_){const n={name:"%"+e+"%"};V(n).then(o=>{var f,h;if(o.code===200){let v=((h=(f=o.data)==null?void 0:f.companies)==null?void 0:h.map(m=>({value:m.name,id:m.id,...m})))??[];_(v)}else console.error(o.message),p.error(o.message)}).catch(o=>{console.error(o),p.error(o.message||"获取公司列表失败")})}const d={get props(){return t},set props(e){t=e},get searchKeyword(){return r},set searchKeyword(e){r=e},get emit(){return a},set emit(e){a=e},fetchSuggestions:c,handleSelect:e=>{let{value:_,...n}=e;a("update:modelValue",n),a("select",n)},ref:y,watchEffect:S,get ElMessage(){return p},get getCompanyListApi(){return V}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},x={class:"company-autocomplete"};function z(u,s,l,t,r,a){const c=A;return b(),w("div",x,[E(c,{size:l.size,modelValue:t.searchKeyword,"onUpdate:modelValue":s[0]||(s[0]=i=>t.searchKeyword=i),"fetch-suggestions":t.fetchSuggestions,placeholder:"搜索公司名称",clearable:"",class:"search-input",onSelect:t.handleSelect},null,8,["size","modelValue"])])}const O=C(K,[["render",z],["__scopeId","data-v-ca8768b5"],["__file","D:/临时存放/green-carbon-1.0/src/views/SystemManagement/CompanyManagement/CompanyList/components/CompanyAutoInput.vue"]]);export{O as C};
